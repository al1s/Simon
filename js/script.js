"use strict";var App={init:function(){this.originalSimonSounds={UL:164.814,UR:440,LL:277.18,LR:329.628},this.simonSwipeSounds={UL:523.251,UR:329.628,LL:261.63,LR:391.995},this.soundLib=this.simonSwipeSounds,this.stepsInGame=30,this.currentStep=1,this.playSound=this.playSound.bind(this)},playSound:function(t){log.debug("Play sound on a mouse click"),log.trace(t),this.changeStyle(t.target);var e=this.soundLib[t.target.id.split("_")[1]];this.play(e),this.stop()}},GameEngine={playSequence:function(t,e){log.debug("Playing sequence on step "+e);var n=!0,i=!1,o=void 0;try{for(var s,a=t.slice(0,e-1)[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var r=s.value,c=this.getElementByName(r);this.playSound({target:c})}}catch(t){i=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}},randomRange:function(t){return t[Math.floor(Math.random()*t.length)]},generateSequence:function(t){var i=this;log.debug("Generating sequence");var o=new Array(t).fill(void 0);return o.reduce(function(t,e,n){for(;t===(e=i.randomRange(Object.keys(i.soundLib))););return o[n]=e},""),o}},SoundGen={start:function(){this.context=new(window.AudioContext||window.webkitAudioContext)},setup:function(){this.oscillator=this.context.createOscillator(),this.gainNode=this.context.createGain(),this.oscillator.connect(this.gainNode),this.gainNode.connect(this.context.destination),this.oscillator.type="sine"},play:function(t){this.setup(),log.debug("Tone value: "+t),this.oscillator.frequency.setValueAtTime(t,this.context.currentTime),this.gainNode.gain.setValueAtTime(0,this.context.currentTime),this.gainNode.gain.linearRampToValueAtTime(1,this.context.currentTime+.01),this.oscillator.start(this.context.currentTime),this.stop()},playInTime:function(t,e){this.setup(),log.debug("Tone value: "+t),this.oscillator.frequency.setValueAtTime(t,this.context.currentTime+e),this.gainNode.gain.setValueAtTime(0,this.context.currentTime+e),this.gainNode.gain.linearRampToValueAtTime(1,this.context.currentTime+e+.01),this.oscillator.start(this.context.currentTime+e),this.stopAtTime(e)},stop:function(){this.gainNode.gain.exponentialRampToValueAtTime(.001,this.context.currentTime+1),this.oscillator.stop(this.context.currentTime+1)},stopAtTime:function(t){this.gainNode.gain.exponentialRampToValueAtTime(.001,this.context.currentTime+t+1),this.oscillator.stop(this.context.currentTime+t+1)}},UI={listen:function(){var e=this;log.debug("Listening on UI");var t=document.querySelectorAll(".buttonGame"),n=document.querySelector("#btnPower");log.trace("Buttons selected:"),log.trace(t),t.forEach(function(t){return t.addEventListener("click",e.playSound)}),n.addEventListener("click",this.togglePressedState)},changeStyle:function(t){t.classList.toggle("--blink"),setTimeout(function(){return t.classList.toggle("--blink")},300)},getElementByName:function(t){return document.querySelector("#button_"+t)},togglePressedState:function(t){t.target.classList.toggle("--pressed")}};log.setLevel("debug"),Object.assign(App,SoundGen,GameEngine,UI),App.init(),App.start(),App.listen();
//# sourceMappingURL=script.js.map
